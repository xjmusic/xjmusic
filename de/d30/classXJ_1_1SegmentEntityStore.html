<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XJ music engine: XJ::SegmentEntityStore Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XJ music engine
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">This is the playback engine for XJ music.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d1/d13/namespaceXJ.html">XJ</a></li><li class="navelem"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html">SegmentEntityStore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../de/d39/classXJ_1_1SegmentEntityStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">XJ::SegmentEntityStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d0/d3b/SegmentEntityStore_8h_source.html">SegmentEntityStore.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3d01bbcc94d2b1a6119fdebd54ade33f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a3d01bbcc94d2b1a6119fdebd54ade33f">SegmentEntityStore</a> ()=default</td></tr>
<tr class="separator:a3d01bbcc94d2b1a6119fdebd54ade33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c806ee1962f62ffb5f04f723faf0f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a79c806ee1962f62ffb5f04f723faf0f8">put</a> (<a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> c)</td></tr>
<tr class="separator:a79c806ee1962f62ffb5f04f723faf0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75611fa0a3c5cf4adab4b77a540d3c31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a75611fa0a3c5cf4adab4b77a540d3c31">put</a> (<a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> segment)</td></tr>
<tr class="separator:a75611fa0a3c5cf4adab4b77a540d3c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bbf59ed3f02874de2aff867925fb21"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a42bbf59ed3f02874de2aff867925fb21">readChain</a> ()</td></tr>
<tr class="separator:a42bbf59ed3f02874de2aff867925fb21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bb3ecf905a9bf74c8d55b18b277be6"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ae8bb3ecf905a9bf74c8d55b18b277be6">readSegment</a> (int segmentId)</td></tr>
<tr class="separator:ae8bb3ecf905a9bf74c8d55b18b277be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80e3f6a3968e159398164ae0e11e6c6"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ad80e3f6a3968e159398164ae0e11e6c6">readSegmentAtChainMicros</a> (long chainMicros)</td></tr>
<tr class="separator:ad80e3f6a3968e159398164ae0e11e6c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd75ad9e4247af4d8ffe9fb8ee69a1c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a7bd75ad9e4247af4d8ffe9fb8ee69a1c">readAllSegments</a> ()</td></tr>
<tr class="separator:a7bd75ad9e4247af4d8ffe9fb8ee69a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4aac66483d18066b5e43ea498152ace"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ab4aac66483d18066b5e43ea498152ace">readSegmentsFromToOffset</a> (int fromOffset, int toOffset)</td></tr>
<tr class="separator:ab4aac66483d18066b5e43ea498152ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4550bd1f51695aae1d96bf5c92b392"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="../../db/de3/classXJ_1_1SegmentEntity.html">SegmentEntity</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#acf4550bd1f51695aae1d96bf5c92b392">readAllSegmentEntities</a> (const std::set&lt; int &gt; &amp;segmentIds)</td></tr>
<tr class="separator:acf4550bd1f51695aae1d96bf5c92b392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87aa30897b996ba4e47097985b0c2d64"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a87aa30897b996ba4e47097985b0c2d64">readAllSegmentsSpanning</a> (long fromChainMicros, long toChainMicros)</td></tr>
<tr class="separator:a87aa30897b996ba4e47097985b0c2d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0323bcd32c5e25bfed025e8e767442"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a7d0323bcd32c5e25bfed025e8e767442">readLastSegmentId</a> ()</td></tr>
<tr class="separator:a7d0323bcd32c5e25bfed025e8e767442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770c04de2ffbc5c90d05a8da625f77e2"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a770c04de2ffbc5c90d05a8da625f77e2">readSegmentLast</a> ()</td></tr>
<tr class="separator:a770c04de2ffbc5c90d05a8da625f77e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac573d247fc7feaa3daf01007cadd241e"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../d3/d50/classXJ_1_1SegmentChoice.html">SegmentChoice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ac573d247fc7feaa3daf01007cadd241e">readChoice</a> (int segmentId, <a class="el" href="../../da/d20/classXJ_1_1Program.html#adbcae8ae8aa248d121fd3c1805badeb5">Program::Type</a> programType)</td></tr>
<tr class="separator:ac573d247fc7feaa3daf01007cadd241e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d2c0822e51404b7e2f8e61dfaa858bd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a5d2c0822e51404b7e2f8e61dfaa858bd">readChoiceHash</a> (const <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &amp;segment)</td></tr>
<tr class="separator:a5d2c0822e51404b7e2f8e61dfaa858bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c09ffbb6613018f5f635e90bdab9071"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a0c09ffbb6613018f5f635e90bdab9071">getSegmentCount</a> ()</td></tr>
<tr class="separator:a0c09ffbb6613018f5f635e90bdab9071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc6ba05d44e489571776b3f03e0f260"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a5fc6ba05d44e489571776b3f03e0f260">isEmpty</a> ()</td></tr>
<tr class="separator:a5fc6ba05d44e489571776b3f03e0f260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bcfc3b25be21e4065ace79d6a8bbb2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a2bcfc3b25be21e4065ace79d6a8bbb2c">updateSegment</a> (<a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &amp;segment)</td></tr>
<tr class="separator:a2bcfc3b25be21e4065ace79d6a8bbb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c76767490dd44935eaf1c6a98c2424"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ac9c76767490dd44935eaf1c6a98c2424">deleteChain</a> ()</td></tr>
<tr class="separator:ac9c76767490dd44935eaf1c6a98c2424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c12dd9499f2d405f6572cc3937698cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a2c12dd9499f2d405f6572cc3937698cc">deleteSegment</a> (int id)</td></tr>
<tr class="separator:a2c12dd9499f2d405f6572cc3937698cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaebd17953063b74ec16e7b1a3e5aa8f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#aaebd17953063b74ec16e7b1a3e5aa8f4">deleteSegmentsBefore</a> (int lastSegmentId)</td></tr>
<tr class="separator:aaebd17953063b74ec16e7b1a3e5aa8f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1141c938ac27234f474bc147211efe0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#ad1141c938ac27234f474bc147211efe0">deleteSegmentsAfter</a> (int lastSegmentId)</td></tr>
<tr class="separator:ad1141c938ac27234f474bc147211efe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd7c77e55e30f0e270632a59b080156"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a3dd7c77e55e30f0e270632a59b080156">clear</a> ()</td></tr>
<tr class="separator:a3dd7c77e55e30f0e270632a59b080156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a06901830eaf2517fe220bc452f293d54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a06901830eaf2517fe220bc452f293d54">protectSegmentStateTransition</a> (<a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a> fromState, <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a> toState)</td></tr>
<tr class="separator:a06901830eaf2517fe220bc452f293d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8d117699f80c8b7391ef5b0c988a05"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html#a8f8d117699f80c8b7391ef5b0c988a05">onlyAllowSegmentStateTransitions</a> (<a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a> toState, const std::set&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a> &gt; &amp;allowedStates)</td></tr>
<tr class="separator:a8f8d117699f80c8b7391ef5b0c988a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../de/d30/classXJ_1_1SegmentEntityStore.html">SegmentEntityStore</a> segments and child entities partitioned by segment id for rapid addressing <a href="https://github.com/xjmusic/xjmusic/issues/276">https://github.com/xjmusic/xjmusic/issues/276</a> </p>
<p><a class="el" href="../../d1/d13/namespaceXJ.html">XJ</a> Lab Distributed Architecture <a href="https://github.com/xjmusic/xjmusic/issues/207">https://github.com/xjmusic/xjmusic/issues/207</a> Chains, ChainBindings, TemplateConfigs, Segments and all <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> content sub-entities persisted in JSON:API record stored keyed by chain or segment id in memory </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3d01bbcc94d2b1a6119fdebd54ade33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d01bbcc94d2b1a6119fdebd54ade33f">&#9670;&nbsp;</a></span>SegmentEntityStore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">XJ::SegmentEntityStore::SegmentEntityStore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3dd7c77e55e30f0e270632a59b080156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd7c77e55e30f0e270632a59b080156">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all records in the store (e.g. during integration testing) </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/dc5/classXJ_1_1FabricationException.html">FabricationException</a></td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9c76767490dd44935eaf1c6a98c2424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c76767490dd44935eaf1c6a98c2424">&#9670;&nbsp;</a></span>deleteChain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::deleteChain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> by # </p><dl class="section return"><dt>Returns</dt><dd>requested <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> </dd></dl>

</div>
</div>
<a id="a2c12dd9499f2d405f6572cc3937698cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c12dd9499f2d405f6572cc3937698cc">&#9670;&nbsp;</a></span>deleteSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::deleteSegment </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> by # </p><dl class="section return"><dt>Returns</dt><dd>requested <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> </dd></dl>

</div>
</div>
<a id="ad1141c938ac27234f474bc147211efe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1141c938ac27234f474bc147211efe0">&#9670;&nbsp;</a></span>deleteSegmentsAfter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::deleteSegmentsAfter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lastSegmentId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all segments after the given segment id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lastSegmentId</td><td>segment id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaebd17953063b74ec16e7b1a3e5aa8f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaebd17953063b74ec16e7b1a3e5aa8f4">&#9670;&nbsp;</a></span>deleteSegmentsBefore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::deleteSegmentsBefore </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lastSegmentId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all segments before the given segment id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lastSegmentId</td><td>segment id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c09ffbb6613018f5f635e90bdab9071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c09ffbb6613018f5f635e90bdab9071">&#9670;&nbsp;</a></span>getSegmentCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SegmentEntityStore::getSegmentCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the total number of segments in the store</p>
<dl class="section return"><dt>Returns</dt><dd>number of segments </dd></dl>

</div>
</div>
<a id="a5fc6ba05d44e489571776b3f03e0f260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc6ba05d44e489571776b3f03e0f260">&#9670;&nbsp;</a></span>isEmpty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SegmentEntityStore::isEmpty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Whether the segment manager is completely empty</p>
<dl class="section return"><dt>Returns</dt><dd>true if there are zero segments </dd></dl>

</div>
</div>
<a id="a8f8d117699f80c8b7391ef5b0c988a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f8d117699f80c8b7391ef5b0c988a05">&#9670;&nbsp;</a></span>onlyAllowSegmentStateTransitions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::onlyAllowSegmentStateTransitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a>&#160;</td>
          <td class="paramname"><em>toState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>allowedStates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Require state is in an array of states</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toState</td><td>to check </td></tr>
    <tr><td class="paramname">allowedStates</td><td>required to be in </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/dc5/classXJ_1_1FabricationException.html">FabricationException</a></td><td>if not in required states </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a06901830eaf2517fe220bc452f293d54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06901830eaf2517fe220bc452f293d54">&#9670;&nbsp;</a></span>protectSegmentStateTransition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::protectSegmentStateTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a>&#160;</td>
          <td class="paramname"><em>fromState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html#a15aa2270d40ce675806a705e0ece7ad4">Segment::State</a>&#160;</td>
          <td class="paramname"><em>toState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> state transitions are protected, dependent on the state this segment is being transitioned of, and the intended state it is being transitioned to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fromState</td><td>to protect transition of </td></tr>
    <tr><td class="paramname">toState</td><td>to test transition to </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/dc5/classXJ_1_1FabricationException.html">FabricationException</a></td><td>on prohibited transition </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a79c806ee1962f62ffb5f04f723faf0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79c806ee1962f62ffb5f04f723faf0f8">&#9670;&nbsp;</a></span>put() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> SegmentEntityStore::put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Put the <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> in the entity store </p><dl class="section return"><dt>Returns</dt><dd>stored <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> </dd></dl>

</div>
</div>
<a id="a75611fa0a3c5cf4adab4b77a540d3c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75611fa0a3c5cf4adab4b77a540d3c31">&#9670;&nbsp;</a></span>put() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> SegmentEntityStore::put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a>&#160;</td>
          <td class="paramname"><em>segment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Put a <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> in the entity store </p><dl class="section return"><dt>Returns</dt><dd>stored <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> </dd></dl>

</div>
</div>
<a id="acf4550bd1f51695aae1d96bf5c92b392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4550bd1f51695aae1d96bf5c92b392">&#9670;&nbsp;</a></span>readAllSegmentEntities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="../../db/de3/classXJ_1_1SegmentEntity.html">SegmentEntity</a> &gt; SegmentEntityStore::readAllSegmentEntities </td>
          <td>(</td>
          <td class="paramtype">const std::set&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>segmentIds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch all sub-entities records for many parent segments by id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segmentIds</td><td>to fetch records for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>collection of all sub entities of these parent segments, different classes that extend <a class="el" href="../../d7/de0/classXJ_1_1Entity.html">Entity</a> </dd></dl>

</div>
</div>
<a id="a7bd75ad9e4247af4d8ffe9fb8ee69a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bd75ad9e4247af4d8ffe9fb8ee69a1c">&#9670;&nbsp;</a></span>readAllSegments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readAllSegments </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get all segments for a chain id</p>
<dl class="section return"><dt>Returns</dt><dd>collection of segments </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/dc5/classXJ_1_1FabricationException.html">FabricationException</a></td><td>on failure to retrieve the requested key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a87aa30897b996ba4e47097985b0c2d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87aa30897b996ba4e47097985b0c2d64">&#9670;&nbsp;</a></span>readAllSegmentsSpanning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readAllSegmentsSpanning </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>fromChainMicros</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>toChainMicros</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the segments that span the given instant</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fromChainMicros</td><td>for which to get segments </td></tr>
    <tr><td class="paramname">toChainMicros</td><td>for which to get segments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>segments that span the given instant, empty if none found </dd></dl>

</div>
</div>
<a id="a42bbf59ed3f02874de2aff867925fb21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bbf59ed3f02874de2aff867925fb21">&#9670;&nbsp;</a></span>readChain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> &gt; SegmentEntityStore::readChain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> by # </p><dl class="section return"><dt>Returns</dt><dd>requested <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> </dd></dl>

</div>
</div>
<a id="ac573d247fc7feaa3daf01007cadd241e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac573d247fc7feaa3daf01007cadd241e">&#9670;&nbsp;</a></span>readChoice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../d3/d50/classXJ_1_1SegmentChoice.html">SegmentChoice</a> &gt; SegmentEntityStore::readChoice </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>segmentId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d20/classXJ_1_1Program.html#adbcae8ae8aa248d121fd3c1805badeb5">Program::Type</a>&#160;</td>
          <td class="paramname"><em>programType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a choice for a given segment id and program type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segmentId</td><td>for which to get choice </td></tr>
    <tr><td class="paramname">programType</td><td>to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>main choice </dd></dl>

</div>
</div>
<a id="a5d2c0822e51404b7e2f8e61dfaa858bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d2c0822e51404b7e2f8e61dfaa858bd">&#9670;&nbsp;</a></span>readChoiceHash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string SegmentEntityStore::readChoiceHash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &amp;&#160;</td>
          <td class="paramname"><em>segment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a hash of all the choices for the given segment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segment</td><td>for which to get the choice hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>hash of all the ids of the choices for the given segment </dd></dl>

</div>
</div>
<a id="a7d0323bcd32c5e25bfed025e8e767442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0323bcd32c5e25bfed025e8e767442">&#9670;&nbsp;</a></span>readLastSegmentId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SegmentEntityStore::readLastSegmentId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the last known segment id</p>
<dl class="section return"><dt>Returns</dt><dd>last segment id </dd></dl>

</div>
</div>
<a id="ae8bb3ecf905a9bf74c8d55b18b277be6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8bb3ecf905a9bf74c8d55b18b277be6">&#9670;&nbsp;</a></span>readSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readSegment </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>segmentId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> by # </p><dl class="section return"><dt>Returns</dt><dd>requested <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> </dd></dl>

</div>
</div>
<a id="ad80e3f6a3968e159398164ae0e11e6c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad80e3f6a3968e159398164ae0e11e6c6">&#9670;&nbsp;</a></span>readSegmentAtChainMicros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readSegmentAtChainMicros </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>chainMicros</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the segment at the given chain microseconds, if it is ready segment beginning &lt;= chain microseconds &lt;= end </p>
<p><a class="el" href="../../d2/d11/classXJ_1_1Note.html">Note</a> this algorithm intends to get the latter segment when the lookup point is on the line between two segments</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chainMicros</td><td>the chain microseconds for which to get the segment </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the segment at the given chain microseconds, or an empty optional if the segment is not ready </dd></dl>

</div>
</div>
<a id="a770c04de2ffbc5c90d05a8da625f77e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a770c04de2ffbc5c90d05a8da625f77e2">&#9670;&nbsp;</a></span>readSegmentLast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readSegmentLast </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the last segment in a <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a>, Segments sorted by offset ascending</p>
<dl class="section return"><dt>Returns</dt><dd>Last <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> in <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> </dd></dl>

</div>
</div>
<a id="ab4aac66483d18066b5e43ea498152ace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4aac66483d18066b5e43ea498152ace">&#9670;&nbsp;</a></span>readSegmentsFromToOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &gt; SegmentEntityStore::readSegmentsFromToOffset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>toOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read all Segments that are accessible, by <a class="el" href="../../de/d9f/classXJ_1_1Chain.html">Chain</a> ID, starting and ending at particular offsets</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fromOffset</td><td>to read segments form </td></tr>
    <tr><td class="paramname">toOffset</td><td>to read segments to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of segments as JSON </dd></dl>

</div>
</div>
<a id="a2bcfc3b25be21e4065ace79d6a8bbb2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bcfc3b25be21e4065ace79d6a8bbb2c">&#9670;&nbsp;</a></span>updateSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SegmentEntityStore::updateSegment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/ddb/classXJ_1_1Segment.html">Segment</a> &amp;&#160;</td>
          <td class="paramname"><em>segment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update a specified <a class="el" href="../../d7/de0/classXJ_1_1Entity.html">Entity</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segment</td><td>for the updated <a class="el" href="../../d7/de0/classXJ_1_1Entity.html">Entity</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/dc5/classXJ_1_1FabricationException.html">FabricationException</a></td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/xjmusic/xjmusic/engine/include/xjmusic/entities/segment/<a class="el" href="../../d0/d3b/SegmentEntityStore_8h_source.html">SegmentEntityStore.h</a></li>
<li>/home/runner/work/xjmusic/xjmusic/engine/src/entities/segment/<a class="el" href="../../d0/d78/SegmentEntityStore_8cpp.html">SegmentEntityStore.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
